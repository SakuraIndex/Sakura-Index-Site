<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸŒ¸æ¡œIndex - å…¬å¼ã‚µã‚¤ãƒˆ</title>
<style>
  :root{
    --bg:#0d1016;--panel:#141924;--text:#e8eef9;--muted:#8ea0bf;
    --ring:#1e2a3d;--chip:#1b2333;--accent:#6ad3ff;--up:#54f7a3;--down:#ff6f6f;
  }
  body{margin:0;background:var(--bg);color:var(--text);font:14px/1.6 system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  a{text-decoration:none;color:inherit}
  header{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:10px;margin-bottom:24px}
  .wrap{max-width:1200px;margin:auto;padding:24px}
  .title{font-size:26px;font-weight:700;display:flex;align-items:center;gap:8px}
  .meta{font-size:12px;color:var(--muted)}
  .btns{display:flex;gap:8px}
  .btn{background:var(--chip);border:1px solid var(--ring);border-radius:10px;padding:6px 12px;font-size:13px}
  .grid{display:grid;gap:18px}
  @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
  .card{background:var(--panel);border:1px solid var(--ring);border-radius:14px;overflow:hidden}
  .card-hd{display:flex;align-items:center;justify-content:space-between;padding:12px 16px}
  .id-left{display:flex;align-items:center;gap:10px}
  .flag{font-size:16px}
  .badge{font-size:12px;background:var(--chip);padding:3px 8px;border-radius:999px;border:1px solid var(--ring);color:var(--muted)}
  .pct{font-weight:700}
  .pct.up{color:var(--up)}.pct.down{color:var(--down)}.pct.na{color:var(--muted)}
  .desc{color:var(--muted);padding:0 16px 8px;font-size:13px}
  .chart{background:#0e131b;border-radius:12px;border:1px solid var(--ring);margin:0 12px 8px;padding:10px;display:flex;align-items:center;justify-content:center;min-height:240px}
  .chart img{max-width:100%;max-height:100%;object-fit:contain;display:block}
  .tabs{display:flex;flex-wrap:wrap;gap:8px;padding:8px 12px 16px}
  .tabs button{background:var(--chip);border:1px solid var(--ring);padding:6px 12px;border-radius:999px;color:var(--muted);cursor:pointer}
  .tabs button.active{color:var(--text);box-shadow:0 0 0 2px var(--accent) inset}
  footer{margin-top:40px;text-align:center;font-size:12px;color:var(--muted);line-height:1.8}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <div class="title">ğŸŒ¸ æ¡œIndex - å…¬å¼ã‚µã‚¤ãƒˆ</div>
      <div class="meta">åŒæœŸå®Œäº†: <span id="syncAt">--</span> / ãƒ‡ãƒ¼ã‚¿: docs/charts/*</div>
    </div>
    <div class="btns">
      <a href="https://x.com" target="_blank" class="btn">å…¬å¼Xï¼ˆTwitterï¼‰</a>
      <a href="https://note.com" target="_blank" class="btn">å…¬å¼note</a>
    </div>
  </header>

  <section id="grid" class="grid"></section>

  <footer>
    ãƒ‡ãƒ¼ã‚¿: å„æŒ‡æ•°ã¯ç­‰åŠ é‡æŒ‡æ•°ï¼ˆä»•æ§˜ã¯å„ãƒªãƒã‚¸ãƒˆãƒªå‚ç…§ï¼‰<br>
    ç”»åƒã¯å„æŒ‡æ•°ãƒªãƒç”Ÿæˆã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’åŒæœŸã—ã¦ã„ã¾ã™ã€‚<br>
    â€»æœ¬ã‚µã‚¤ãƒˆã¯æŠ•è³‡åŠ©è¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æŠ•è³‡åˆ¤æ–­ã¯ã”è‡ªèº«ã®è²¬ä»»ï¼ˆè‡ªå·±è²¬ä»»ï¼‰ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚<br>
    Â© 2025 æ¡œIndex
  </footer>
</div>

<script>
/* === indexæ§‹æˆ === */
const INDEXES = [
  { key:"astra4",  flag:"ğŸ‡¯ğŸ‡µ", name:"Astra4",  tag:"å®‡å®™ãƒ™ãƒ³ãƒãƒ£ãƒ¼", desc:"å®‡å®™é–¢é€£éŠ˜æŸ„ã®ç­‰ã‚¦ã‚§ã‚¤ãƒˆæŒ‡æ•°ã€‚å¯è¦–åŒ–ã¯ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã«é…æ…®ã€‚"},
  { key:"rbank9",  flag:"ğŸ‡¯ğŸ‡µ", name:"R-BANK9", tag:"åœ°æ–¹éŠ€è¡Œ", desc:"åœ°æ–¹éŠ€è¡Œ9éŠ˜æŸ„ã®ç­‰ã‚¦ã‚§ã‚¤ãƒˆæŒ‡æ•°ã€‚æ—¥ä¸­ã¯%ã€é•·æœŸã¯ãƒ¬ãƒ™ãƒ«æ¨ç§»ã‚’è¡¨ç¤ºã€‚"},
  { key:"ain10",   flag:"ğŸ‡ºğŸ‡¸", name:"AIN-10",  tag:"AIé–¢é€£10", desc:"ç±³AIé–¢é€£10éŠ˜æŸ„ã®ç­‰ã‚¦ã‚§ã‚¤ãƒˆæŒ‡æ•°ã€‚çŸ­æœŸãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ è¦³æ¸¬ã«ä¾¿åˆ©ã€‚"},
  { key:"scoin_plus", flag:"ğŸ‡¯ğŸ‡µ", name:"S-COIN+", tag:"ä»®æƒ³è³‡ç”£é–¢é€£", desc:"æš—å·è³‡ç”£é–¢é€£ã®ç­‰ã‚¦ã‚§ã‚¤ãƒˆæŒ‡æ•°ã€‚æ—¥ä¸­ã¯é¨°è½ç‡ã€é•·æœŸã¯ãƒ¬ãƒ™ãƒ«æ¨ç§»ã‚’è¡¨ç¤ºã€‚"}
];

const VARS = ["intraday","am","7d","1m","1y"];
document.getElementById("syncAt").textContent =
  new Date().toLocaleString("ja-JP",{hour12:false});

/* === DOMç”Ÿæˆ === */
const grid=document.getElementById("grid");
for(const idx of INDEXES){
  const el=document.createElement("article");
  el.className="card";
  el.innerHTML=`
    <div class="card-hd">
      <div class="id-left"><span class="flag">${idx.flag}</span>
      <b>${idx.name}</b><span class="badge">${idx.tag}</span></div>
      <div class="pct na" id="${idx.key}-pct">N/A</div>
    </div>
    <p class="desc">${idx.desc}</p>
    <div class="chart"><img id="${idx.key}-img" alt="${idx.name} chart"></div>
    <div class="tabs">
      ${VARS.map(v=>`<button data-v="${v}" class="${v==="intraday"?"active":""}">${tabName(v)}</button>`).join("")}
    </div>`;
  grid.appendChild(el);
}

/* === ãƒ¡ã‚¿JSONèª­è¾¼ãƒ»ç”»åƒæ›´æ–° === */
const BASE="docs/charts";
const META_DIR=`${BASE}/meta`;

(async()=>{
  for(const idx of INDEXES){
    const meta=await fetchJSON(`${META_DIR}/${idx.key}.json`);
    updateCard(idx,meta);
  }
})();

/* === é–¢æ•° === */
function tabName(v){
  return v==="intraday"?"Intraday":v==="am"?"å‰å ´(AM)":v==="7d"?"7æ—¥":v==="1m"?"1ãƒ¶æœˆ":"1å¹´";
}
async function fetchJSON(url){
  try{const r=await fetch(url,{cache:"no-store"});if(!r.ok)throw 0;return await r.json();}
  catch{return null;}
}

function updateCard(idx,meta){
  const pct=document.getElementById(`${idx.key}-pct`);
  const img=document.getElementById(`${idx.key}-img`);
  const tabs=document.querySelectorAll(`[data-v][class*="active"]`);
  const p = getHeadline(meta);
  if(p==null){pct.textContent="N/A";pct.className="pct na";}
  else if(p>0){pct.textContent=`+${p.toFixed(2)}%`;pct.className="pct up";}
  else if(p<0){pct.textContent=`${p.toFixed(2)}%`;pct.className="pct down";}
  else {pct.textContent="0.00%";pct.className="pct";}
  const snap=meta?.snapshots?.intraday||meta?.snapshots?.["1d"]||meta?.snapshots?.["7d"];
  img.src=snap?`${BASE}/${snap}?v=${Date.now()}`:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";

  // tabã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
  const card=img.closest(".card");
  card.querySelectorAll(".tabs button").forEach(b=>{
    b.onclick=()=>{
      card.querySelectorAll(".tabs button").forEach(x=>x.classList.remove("active"));
      b.classList.add("active");
      const v=b.dataset.v;
      const target=meta?.snapshots?.[v]||snap;
      img.src=target?`${BASE}/${target}?v=${Date.now()}`:img.src;
    };
  });
}

function getHeadline(meta){
  if(!meta)return null;
  if(meta.percent?.intraday!=null)return meta.percent.intraday;
  if(meta.level?.["1d"]!=null)return meta.level["1d"];
  return null;
}
</script>
</body>
</html>
