<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸŒ¸ æ¡œIndex - å…¬å¼ã‚µã‚¤ãƒˆ</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-dark text-light">
  <header>
    <h1>ğŸŒ¸ æ¡œIndex - å…¬å¼ã‚µã‚¤ãƒˆ</h1>
    <p id="synctime">åŒæœŸå®Œäº†: --</p>
  </header>

  <main id="dashboard" class="grid grid-cols-2 gap-4 p-4">
    <!-- å„æŒ‡æ•°ãƒ‘ãƒãƒ« -->
    <section id="astra4" class="panel">
      <div class="si-header">
        <span class="si-title">ğŸ‡¯ğŸ‡µ Astra4</span>
        <span class="si-percent">â€”</span>
      </div>
      <img src="docs/charts/astra4_1d.png" alt="Astra4 chart" />
      <p class="si-updated">â€”</p>
    </section>

    <section id="scoin_plus" class="panel">
      <div class="si-header">
        <span class="si-title">ğŸ‡¯ğŸ‡µ S-COIN+</span>
        <span class="si-percent">â€”</span>
      </div>
      <img src="docs/charts/scoin_plus_1d.png" alt="S-COIN+ chart" />
      <p class="si-updated">â€”</p>
    </section>

    <section id="rbank9" class="panel">
      <div class="si-header">
        <span class="si-title">ğŸ‡¯ğŸ‡µ R-BANK9</span>
        <span class="si-percent">â€”</span>
      </div>
      <img src="docs/charts/rbank9_1d.png" alt="R-BANK9 chart" />
      <p class="si-updated">â€”</p>
    </section>

    <section id="ain10" class="panel">
      <div class="si-header">
        <span class="si-title">ğŸ‡ºğŸ‡¸ AIN-10</span>
        <span class="si-percent">â€”</span>
      </div>
      <img src="docs/charts/ain10_1d.png" alt="AIN-10 chart" />
      <p class="si-updated">â€”</p>
    </section>
  </main>

  <footer class="text-center text-gray-400 p-2 text-sm">
    ãƒ‡ãƒ¼ã‚¿ï¼šç­‰åŠ é‡æŒ‡æ•°ï¼ˆä»•æ§˜ã¯å„ãƒªãƒã‚¸ãƒˆãƒªå‚ç…§ï¼‰ï¼ç”»åƒã¯å„æŒ‡æ•°ãƒªãƒã®è‡ªå‹•ç”Ÿæˆã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’åŒæœŸã—ã¦ã„ã¾ã™ã€‚<br>
    â€»æœ¬ã‚µã‚¤ãƒˆã¯æŠ•è³‡åŠ©è¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æŠ•è³‡åˆ¤æ–­ã¯ã”è‡ªèº«ã®è²¬ä»»ï¼ˆè‡ªå·±è²¬ä»»ï¼‰ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚<br>
    Â© 2025 æ¡œIndex
  </footer>

  <!-- æ”¹è‰¯ç‰ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script>
    const META = {
      astra4:    { label: 'Astra4',  flag: 'ğŸ‡¯ğŸ‡µ' },
      scoin_plus:{ label: 'S-COIN+', flag: 'ğŸ‡¯ğŸ‡µ' },
      rbank9:    { label: 'R-BANK9', flag: 'ğŸ‡¯ğŸ‡µ' },
      ain10:     { label: 'AIN-10',  flag: 'ğŸ‡ºğŸ‡¸' },
    };

    function fmtJST(iso) {
      try {
        const d = new Date(iso);
        if (Number.isNaN(d.getTime())) return 'â€”';
        return d.toLocaleString('ja-JP', {
          timeZone: 'Asia/Tokyo',
          year: 'numeric', month: '2-digit', day: '2-digit',
          hour: '2-digit', minute: '2-digit', second: '2-digit',
          hour12: false
        });
      } catch {
        return 'â€”';
      }
    }

    async function loadPanel(key) {
      const meta = META[key] || {label:key, flag:''};
      const el = document.getElementById(key);
      if (!el) return;

      let pct = null, updated = 'â€”';
      try {
        const s = await (await fetch(`docs/charts/${key}_stats.json`, {cache:'no-store'})).json();
        if (typeof s?.pct_1d === 'number') pct = s.pct_1d;
        if (typeof s?.updated_at === 'string') updated = fmtJST(s.updated_at);
      } catch {}

      el.querySelector('.si-title').textContent   = `${meta.flag} ${meta.label}`;
      el.querySelector('.si-percent').textContent = (pct === null) ? 'â€”' : `${pct >= 0 ? '+' : ''}${pct.toFixed(2)}%`;
      el.querySelector('.si-updated').textContent = updated || 'â€”';
    }

    async function init() {
      const keys = ['astra4','scoin_plus','rbank9','ain10'];
      for (const k of keys) await loadPanel(k);
      document.getElementById('synctime').textContent = 
        `åŒæœŸå®Œäº†: ${fmtJST(new Date().toISOString())} / ãƒ‡ãƒ¼ã‚¿: docs/charts/*`;
    }

    init();
  </script>
</body>
</html>
