{%- comment -%}
カード部品（完全版）
props:
  id, title, flag, badge, desc, stats_json, intraday_png
{%- endcomment -%}

{% assign stats_attr = stats_json  | uri_escape | relative_url %}
{% assign img_src   = intraday_png | uri_escape | relative_url %}

<div class="idx-card" data-stats="{{ stats_attr }}">
  <div class="idx-head">
    <div class="idx-title">
      <span class="idx-flag">{{ flag }}</span>
      <span>{{ title }}</span>
      <span class="idx-badge">{{ badge }}</span>
    </div>
    <div class="idx-pct na">N/A</div>
  </div>

  <p class="idx-desc">{{ desc }}</p>

  <div class="chart-wrap">
    <img class="chart-img" alt="{{ id }} chart" src="{{ img_src }}" loading="lazy" decoding="async"
      onerror="this.style.display='none'; this.closest('.chart-wrap').insertAdjacentHTML('beforeend','<div class=&quot;img-fallback&quot;>画像が見つかりません</div>')">
  </div>

  <div class="idx-tabs">
    <span class="idx-tab active">Intraday</span>
    <span class="idx-tab">前場(AM)</span>
    <span class="idx-tab">7日</span>
    <span class="idx-tab">1ヶ月</span>
    <span class="idx-tab">1年</span>
  </div>
</div>
